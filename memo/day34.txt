day34

1. 웹서버 (http web server)
	웹 어플리케이션을 실행하기 위한 서버이다.
	클라이언트가 보낸 요청이 정적인 컨텐츠를 요구하는지 동적인 컨텐츠를 요구하는지 구분한다.
	정적인 컨텐츠를 요청한다면 미리 준비한 웹 문서를 response에 담아 보내주지만 동적 컨텐츠는 처리할 수 없다.
	즉, 정적 페이지를 처리하는 서버이다.
	자바에서 사용하는 웹 서버는 대표적으로 Apache가 있다.

2. WAS (Web Application Server)
	웹 서버와 동일하게 웹 어플리케이션을 실행하기 위한 서버이며, 웹 컨테이너(서블릿 컨테이너)라고 불린다.
	웹 서버와 다르게 정적, 동적 컨텐츠를 모두 처리할 수 있다.
	단, 정적 컨텐츠를 처리는 웹서버에 비해 성능이 떨어진다.
	동적 컨텐츠를 처리하기 위해 여러 연산 및 DB 접근을 수행하며 JAVA를 이용한다.
	자바에서 사용하는 WAS는 대표적으로 Tomcat이 있다.

3. 아파치 톰캣
	WAS로 분류되지만 Apache와 Tomcat을 합쳐놓은 형태이다
	즉, 일반적인 WAS와 달리 web Server를 포함하고 있다.
	아파치 톰캣의 웹서버는 정적 요청을 처리하며 동적 요청이 들어왔을때 웹 컨테이너에게 요청을 전달한다.
	그러면 웹 컨테이너는 동적 컨텐츠를 처리하여 웹 서버에게 응답을 보낸다.
	웹 서버는 클라이언트에게 응답을 보낼 때 컨테이너에게 받은 결과를 포함시켜 보낸다.


4. 아파치 톰캣 설치 및 세팅

	구글 > 아파치 톰캣 검색 > 최상단 사이트 링크 > 좌측 다운로드 Tomcat9 버전 > 64bit window zip 다운로드
	> C 드라이브에 압축풀기

+) 이클립스 세팅
	1) 웹개발을 하므로 관점을 java EE로 사용한다(기본설정)
	2) WINDOWS > Preferences > enc 검색 > 인코딩 타입 UTF-8로 확인(workspace, css, html, jsp, xml)
	3) preferencs > server > server and Runtime 클릭 > 서버 버전 v9.0으로 변경 (다운로드 받은 버전) > Axis 2로 변경(성능 개선)
	4) server 검색 > Runtime Environments > add > 9.0 버전 선택 후 next > browse 눌러서 c드라이브에 있는 아파치 톰캣 폴더 선택하기
	5) 하단의 서버탭을 제외한 후 모두 지우고 서버탭에서 No Servers... 클릭
	6) 아파치 > 9.0 서버 클릭 > next > finish
	7) server 탭의 톰캣 서버 더블클릭 하여 포트 번호 확인
		기본포트는 8080이고 8888로 변경
	8) 서버를 실행시켜서 제대로 켜지는지 확인 (서버 옆에 started가 떠야함) 


5. 서블릿(Servlet)
	서블릿은 자바에서 제공하고 있는 클래스 , 기술이며 동적인 웹페이지를 만들기 위해 사용한다.
	Java 코드 안에 HTML을 작성하는 형태이며 사용자의 요청방식에 따라 doGet(), doPost()등의 메소드가 실행된다.
	httpServlet 클래스를 상속받아 사용한다.	

-프로토콜(Protocol)
	네트워크를 통해 컴퓨터들이 정보를 주고받는 절차 또는 통신규약을 의미함
	서로 다른 컴퓨터들이 대화하기 위해 필요한 공통 언어 역할을 함
	파일 전송(FTP), 이메일전송(SMTP)...

-포트(Port)
	컴퓨터 사이에서 데이터를 주고받을 수 있는 통로를 의미함
	인터넷에서는 ip주소를 통해 서버 컴퓨터의 위치를 파악하고 그 컴퓨터가 제공하는 특정 서비스는 포트번호를 통해 알 수 있다.
	HTTP : 80 , HTTPS : 443

	2) 주요 특징
		(1) 정적 웹페이지와 동적 웹페이지
			정적 웹페이지(static web page) : 웹서버에 저장되어 있는 파일을 그대로 웹 브라우저에 전송해 출력하는
							가장 기본적인 웹페이지
			동적 웹페이지(dynamic web page) : 동일한 페이지라고해도 클라이언트 요청을 해석하여 그때그때 내용이 달라질 수 있는 웹 페이지를 의미한다.
							
		(2) 탄생배경
			동적 웹페이지 기술로는 분류되지 않지만 웹을 동적으로 만들기 위한 고대의 자바 기술 자바 애플릿(Java Applet)
			자바 애플릿은 웹에서 실행되도록 설계된 자바 어플리케이션을 통째로 웹 브라우저로 전송한 후 자바 가상 머신을 탑재한 웹브라우저가 이를 실행하는 방식으로 구동
			동적 웹 기술이 발달하기 전 시절 한 때 이목을 끌었지만 표준 기술인 HTML과 자바스크립트가 발전함에 따라 지금은 더이상 지원되지 않는 기술이다.

			어플리케이션 전체가 클라이언트에 다운로드 된 후 실행되는 자바 애플릿은 속도나 보안성, 유연성에서 한계가 있었고,
			서버 측에서 실행되는 서블릿이 등장하게 되었다.
			서블릿은 클라이언트의 요청을 받으면 서버에서 처리한 후, 응답으로는 결과값만 보내주는 구조이다.

			웹 브라우저(클라이언트) -- 요청 --> 웹 어플리케이션 서버(웹 서버) -- 요청 --> 서블릿 컨테이너 (서블릿) -- 응답 --> 웹서버 --응답--> 웹 브라우저 
			서블릿은 .java 자바파일을 컴파일한 클래스 파일(.class) 형태로 이를 실행하고 관리해주는 런타임을 서블릿 컨테이너라고 한다.
			대표적으로는 아파치 톰캣이 있다.

			
			JSP 파일을 서블릿으로 변환하여 서블릿을 실행하는 방식

		(3) 서블릿과 JSP의 차이
			
			서블릿					JSP

			자바 코드 안에서 전체 HTML 페이지를 생성		HTML 코드 안에서 필요한 부분만 자바 코드를 스크립트 형태로 추가함
			변수 선언 및 초기화가 반드시 선행되어야함		자주 쓰이는 기능을 내장 객체로 제공하여 즉시 사용 가능함
			컨트롤러(controller)를 만들때 사용하고		처리된 결과를 보여주는 뷰(View)를 만들때 사용함
			
===================================================================================================================================


6. JSP(Java Server Page)
	Java를 기반으로 만든 웹 프로그래밍 기술이다.
	서블릿의 불편함을 개선하고자 HTML에 JAVA 코드를 작성할 수 있게 만들었으며, 동적인 페이지를 만드는데 특화되어있다.
	JSP도 서블릿 클래스처럼 웹 컨테이너(서블릿 컨테이너)가 관리하며
	웹 컨테이너가 JSP를 실행시킬때 서블릿으로 변환화여 실행한다.
	즉, JSP는 내부적으로 서블릿으로 변환되어 실행된다.
	

7.  web.xml 파일
	서블릿 파일에 작성된 @WebServlet()어노테이션에 해당 서블렛의 경로를 작성한다.
	예전에는 web.xml 파일을 이용해서 URL 매핑 처리를 진행했다
	@WebServlet() 어노테이션 대신 이 서블릿의 경로를 알려줄 수 있도록 작성하는 파일이다.
	우리가 만든 서블릿 파일을 등록하고 특정 경로로 요청이 들어오면 우리가 등록한 서블릿과 연결되도록 매핑해줘야한다.
	
	1) 서블릿과 URL 매핑
		<servlet>  : 우리가 만든 서블릿을 등록할 수 있다.
			<servlet-name> : 서블릿에 이름을 지어주는 태그
			<servlet-class>: 패키지 경로를 포함한 서블릿 클래스의 이름을 작성하는 태그
		<servlet-mapping> : 우리가 만든 서블릿과 특정 URL 경로를 매핑 시킬 수 있다.
			<servlet-name> : 매핑시킬 서블릿의 이름을 작성하는데 서블릿 등록시 작성한 이름으로 지정한다.
			<url-pattern> : 어떤 URL 경로와 매핑시킬지 작성한다.

				

	2) web.xml 파일 사용할 때의 요청(Request) 흐름
		-클라이언트가 요청(Request)를 보낸다
		-웹 서버가 사용자가 req를 보낸 URL을 검사하여 어떤 서블릿이 req를 처리해야하는지 결정한다.
		-만약 req가 정적페이지를 원한다면 웹서버는 자체적으로 처리하여 응답(response)를 클라이언트에게 보내준다
		-만약 req이 동적페이지를 원한다면 웹서버는 서블릿 컨테이너의 도움을 받는다.
		-서블릿 컨테이너는 web.xml파일에서 URL에 해당하는 서블릿을 찾아서 실행한다.
		-서블릿은 req를 처리하여 서블릿 컨테이너 전달하고 서블릿 컨테이너는 웹서버로 전달한다.
		-최종적으로 웹서버는 클라이언트에게 resp를 보낸다.






